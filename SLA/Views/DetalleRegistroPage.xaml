<?xml version="1.0" encoding="utf-8" ?>
<ContentPage  xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
              xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
              x:Class="SLA.Views.DetalleRegistroPage"
              Title="Resumen del formulario">

    <ContentPage.ToolbarItems>
        <ToolbarItem Text="PDF" Clicked="OnExportarPdfClicked">
            <ToolbarItem.IconImageSource>
                <FontImageSource FontFamily="OpenSansSemibold" Glyph=" " Color="White"/>
            </ToolbarItem.IconImageSource>
        </ToolbarItem>
    </ContentPage.ToolbarItems>

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">
            <Border BackgroundColor="{StaticResource Primary}" Padding="15">
                <VerticalStackLayout>
                    <Label  Text="{Binding TipoMovimiento}"
                            TextColor="White" FontSize="24" FontAttributes="Bold" />
                    <Label Text="{Binding Fecha, StringFormat='{}{0:dd/MM/yyyy HH:mm}'}" 
                           TextColor="White" Opacity="0.9"/>
                </VerticalStackLayout>
            </Border>

            <Grid ColumnDefinitions="*,*" RowDefinitions="Auto, Auto" ColumnSpacing="10" RowSpacing="10">
                <VerticalStackLayout Grid.Row="0" Grid.Column="0">
                    <Label  Text="UNIDAD:"  FontSize="12" FontAttributes="Bold" Opacity="0.6"/>
                    <Label Text="{Binding Unidad}" FontSize="16" />
                </VerticalStackLayout>
                
                <VerticalStackLayout Grid.Row="0" Grid.Column="1">
                    <Label  Text="OPERADOR:"  FontSize="12" FontAttributes="Bold" Opacity="0.6"/>
                    <Label Text="{Binding Operador}" FontSize="16" />
                </VerticalStackLayout>

                <VerticalStackLayout Grid.Row="1" Grid.Column="0">
                    <Label  Text="ESTADO:"  FontSize="12" FontAttributes="Bold" Opacity="0.6"/>
                    <Label Text="{Binding Estado}" FontSize="16" />
                </VerticalStackLayout>
            </Grid>

            <BoxView HeightRequest="1" BackgroundColor="LightGray" HorizontalOptions="Fill" Margin="0,5"/>

            <Label  Text="OBSERVACIONES:" FontSize="12" FontAttributes="Bold" Opacity="0.6" />

            <Border BackgroundColor="#F5F5F5" Padding="10">
                <Label  Text="{Binding Observaciones}" FontSize="14" FontAttributes="Bold" Opacity="0.6" Margin="0,10,0,0" />
            </Border>

            <Label  Text="LISTADO DE MATERIALES:" FontSize="12" Opacity="0.6"
                    FontAttributes="Bold"  Margin="0,10,0,0" />

            <CollectionView ItemsSource="{Binding Items}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Border Padding="12" Margin="0,0,0,8" StrokeShape="RoundRectangle 8">
                            <Grid ColumnDefinitions="Auto, *, Auto" ColumnSpacing="15">
                                <Border Grid.Column="0" HeightRequest="30" WidthRequest="30"
                                        Padding="0" BackgroundColor="#e0e0e0">
                                    <Label Text="{Binding Cantidad}" VerticalOptions="Center" HorizontalOptions="Center"
                                           FontSize="12" FontAttributes="Bold"/>
                                </Border>

                                <VerticalStackLayout Grid.Column="1" VerticalOptions="Center">
                                    <Label Text="{Binding Descripcion}" FontAttributes="Bold" FontSize="14"/>
                                    <Label Text="{Binding Tipo}" FontSize="12" Opacity="0.7"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
